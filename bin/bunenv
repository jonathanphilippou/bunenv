#!/usr/bin/env node

// This script is the entry point for the bunenv CLI
// It's wrapped in a node shebang to ensure it works across all platforms

// Always use the system bun for bunenv commands
// This bypasses the shim mechanism to avoid circular dependencies
process.env.BUNENV_BYPASS_SHIM = "1";

// Handle both npm and Homebrew installation paths
const paths = [
  "../dist/index.js", // npm standard path
  "../libexec/lib/node_modules/bunenv/dist/index.js", // Homebrew path
  "../src/index.js", // Development fallback
];

// Try each path in sequence
async function tryPaths(index = 0) {
  if (index >= paths.length) {
    console.error("Failed to load bunenv: Could not find entry point");
    process.exit(1);
  }

  try {
    await import(paths[index]);
  } catch (error) {
    // Try the next path
    tryPaths(index + 1);
  }
}

// Start trying paths
tryPaths();
